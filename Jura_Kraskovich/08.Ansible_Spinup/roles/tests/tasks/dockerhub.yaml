---
- name: Check Docker Hub registry
  block:
    - name: Check Docker Hub registry
      uri:
        url: "{{ item }}"
        return_content: yes
      register: out_dockerhub
      with_items: "{{ dockerhub_registry }}"
      failed_when: out_dockerhub.status != 200
  rescue:
    - name: Slak notification
      slack:
        token: TFBPBNB2L/BUP6ZS22G/ghM0qjhvugFdTupaUa1UkUdL
        msg: 'Docker Hub not available on {{ ansible_hostname }}'
        channel: '#ansible_ntf'
        color: danger
        username: '{{ inventory_hostname }}'